B* Cluster Admin Authentication

#+begin_src bash
oc explain Role
#+end_src

#+begin_example
# KIND:     Role
# VERSION:  rbac.authorization.k8s.io/v1
# 
# DESCRIPTION:
#      Role is a namespaced, logical grouping of PolicyRules that can be
#      referenced as a unit by a RoleBinding.
# 
# FIELDS:
#    apiVersion	<string>
#      APIVersion defines the versioned schema of this representation of an
#      object. Servers should convert recognized schemas to the latest internal
#      value, and may reject unrecognized values. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#resources
# 
#    kind	<string>
#      Kind is a string value representing the REST resource this object
#      represents. Servers may infer this from the endpoint the client submits
#      requests to. Cannot be updated. In CamelCase. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds
# 
#    metadata	<Object>
#      Standard object's metadata.
# 
#    rules	<[]Object>
#      Rules holds all the PolicyRules for this Role
#+end_example
#+begin_src bash
oc explain ClusterRole
#+end_src

#+begin_example
# KIND:     ClusterRole
# VERSION:  rbac.authorization.k8s.io/v1
# 
# DESCRIPTION:
#      ClusterRole is a cluster level, logical grouping of PolicyRules that can be
#      referenced as a unit by a RoleBinding or ClusterRoleBinding.
# 
# FIELDS:
#    aggregationRule	<Object>
#      AggregationRule is an optional field that describes how to build the Rules
#      for this ClusterRole. If AggregationRule is set, then the Rules are
#      controller managed and direct changes to Rules will be stomped by the
#      controller.
# 
#    apiVersion	<string>
#      APIVersion defines the versioned schema of this representation of an
#      object. Servers should convert recognized schemas to the latest internal
#      value, and may reject unrecognized values. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#resources
# 
#    kind	<string>
#      Kind is a string value representing the REST resource this object
#      represents. Servers may infer this from the endpoint the client submits
#      requests to. Cannot be updated. In CamelCase. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds
# 
#    metadata	<Object>
#      Standard object's metadata.
# 
#    rules	<[]Object>
#      Rules holds all the PolicyRules for this ClusterRole
# 
#+end_example
#+begin_src bash
oc explain RoleBinding

#+begin_example
# KIND:     RoleBinding
# VERSION:  rbac.authorization.k8s.io/v1
# 
# DESCRIPTION:
#      RoleBinding references a role, but does not contain it. It can reference a
#      Role in the same namespace or a ClusterRole in the global namespace. It
#      adds who information via Subjects and namespace information by which
#      namespace it exists in. RoleBindings in a given namespace only have effect
#      in that namespace.
# 
# FIELDS:
#    apiVersion	<string>
#      APIVersion defines the versioned schema of this representation of an
#      object. Servers should convert recognized schemas to the latest internal
#      value, and may reject unrecognized values. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#resources
# 
#    kind	<string>
#      Kind is a string value representing the REST resource this object
#      represents. Servers may infer this from the endpoint the client submits
#      requests to. Cannot be updated. In CamelCase. More info:
#      https://git.k8s.io/community/contributors/devel/api-conventions.md#types-kinds
# 
#    metadata	<Object>
#      Standard object's metadata.
# 
#    roleRef	<Object> -required-
#      RoleRef can reference a Role in the current namespace or a ClusterRole in
#      the global namespace. If the RoleRef cannot be resolved, the Authorizer
#      must return an error.
# 
#    subjects	<[]Object>
#      Subjects holds references to the objects the role applies to.
# 
#+end_example

* Machineset

#+begin_src bash
cat /opt/app-root/src/support/infra-nodes.sh
#+end_src

* Deploying and Managing OpenShift Container Storage

#+begin_src bash
oc get nodes -l node-role.kubernetes.io/worker -l '!node-role.kubernetes.io/infra','!node-role.kubernetes.io/master'
#+end_src

#+begin_example
# NAME                                         STATUS   ROLES    AGE    VERSION
# ip-10-0-133-255.us-east-2.compute.internal   Ready    worker   22h    v1.14.6+9fb2d5cf9
# ip-10-0-156-47.us-east-2.compute.internal    Ready    worker   22h    v1.14.6+9fb2d5cf9
# ip-10-0-172-64.us-east-2.compute.internal    Ready    worker   5h7m   v1.14.6+9fb2d5cf9
#+end_example

#+begin_src bash
oc get machinesets -n openshift-machine-api | grep -v infra
#+end_src

#+begin_example
# NAME                                          DESIRED   CURRENT   READY   AVAILABLE   AGE
# cluster-munich-e7ab-lqhqg-worker-us-east-2a   1         1         1       1           22h
# cluster-munich-e7ab-lqhqg-worker-us-east-2b   1         1         1       1           22h
# cluster-munich-e7ab-lqhqg-worker-us-east-2c   1         1         1       1           22h
#+end_example

#+begin_src bash
CLUSTERID=$(oc get machineset -n openshift-machine-api -o jsonpath='{.items[0].metadata.labels.machine\.openshift\.io/cluster-api-cluster}')
echo $CLUSTERID
#+end_src

#+begin_example
cluster-munich-e7ab-lqhqg
#+end_example

